<!-- Filter button -->
<button *ngIf="column.filterable"
        class="column-filter-button"
        [class.active]="isFilterActive"
        (click)="toggleFilter($event)"
        [appTooltip]="isFilterActive ? 'Filter is active' : 'Filter ' + column.label">
  <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor">
    <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
  </svg>
</button>

<!-- Filter dropdown -->
<div class="column-filter-dropdown"
     *ngIf="showFilterDropdown"
     [style.left.px]="filterDropdownX"
     [style.top.px]="filterDropdownY"
     (click)="$event.stopPropagation()"
     (mousedown)="$event.stopPropagation()"
     (mouseup)="$event.stopPropagation()">
  
  <div class="filter-header">
    <span class="filter-title">Filter {{ column.label }}</span>
    <button class="close-button" (click)="closeFilter()">Ã—</button>
  </div>
  
  <div class="filter-content">
    <!-- Text filter -->
    <div *ngIf="isTextColumn" class="filter-form">
      <select class="filter-select" [(ngModel)]="filterOperator">
        <option *ngFor="let op of textOperatorOptions" [value]="op.value">{{ op.label }}</option>
      </select>
      <input type="text" 
             class="filter-input" 
             [(ngModel)]="filterValue"
             placeholder="Enter value..."
             (keyup.enter)="applyFilter()">
    </div>
    
    <!-- Number filter -->
    <div *ngIf="isNumberColumn" class="filter-form">
      <select class="filter-select" [(ngModel)]="filterOperator">
        <option *ngFor="let op of numberOperatorOptions" [value]="op.value">{{ op.label }}</option>
      </select>
      <input type="number" 
             class="filter-input" 
             [(ngModel)]="filterValue"
             placeholder="Enter number..."
             (keyup.enter)="applyFilter()">
    </div>
    
    <!-- Boolean filter -->
    <div *ngIf="isBooleanColumn" class="filter-form">
      <select class="filter-select full-width" [(ngModel)]="filterValue">
        <option *ngFor="let op of booleanOptions" [value]="op.value">{{ op.label }}</option>
      </select>
    </div>
    
    <!-- Current filter display -->
    <div *ngIf="currentFilter" class="current-filter">
      <span class="filter-label">Active:</span>
      <span class="filter-value">
        {{ currentFilter.operator }} 
        <strong>{{ isBooleanColumn ? (currentFilter.value ? 'Yes' : 'No') : currentFilter.value }}</strong>
      </span>
    </div>
  </div>
  
  <div class="filter-actions">
    <button class="filter-button clear" 
            *ngIf="isFilterActive"
            (click)="clearFilter()">Clear</button>
    <button class="filter-button apply" 
            (click)="applyFilter()">Apply</button>
  </div>
</div>