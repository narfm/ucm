<!-- Modal Overlay - Rendered at root level -->
<div *ngIf="isOpen()" class="hierarchy-config-overlay" (click)="onOverlayClick($event)">
  <div class="hierarchy-config-panel" (click)="$event.stopPropagation()">
    <div class="panel-header">
      <h3 class="panel-title">
        {{ modalConfig()?.nodeContext ? 'Change Hierarchy for: ' + modalConfig()?.nodeContext?.name : modalConfig()?.title }}
      </h3>
      <button class="close-button" (click)="closeModal()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
    </div>
    
    <div class="panel-content">
      <p class="panel-description">Drag to reorder, toggle to enable/disable levels</p>
      
      <app-hierarchy-selector
        [config]="modalConfig()?.config || { levels: [], maxDepth: 3 }"
        [hierarchyTypes]="modalConfig()?.hierarchyTypes || []"
        [compactMode]="false"
        [modalMode]="true"
        (configChange)="onConfigChange($event)">
      </app-hierarchy-selector>
    </div>
  </div>
</div>